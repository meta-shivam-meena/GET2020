<!DOCTYPE html>
<html>

<head>
    <title>Metacube Parking System</title>
    <style>
        #addVehicleForm {
            visibility: hidden;
        }
        #showPasses {
            visibility: hidden;
        }
        #selectPass {
            visibility: hidden;
        }
        #showRates {
            visibility: hidden;
        }
    </style>
        
    <script>
        function isValidEmployeeName() {
            var result = true;
            var name = document.getElementById('employeeName').value;
            if (name == null || name.length < 2) {
                result = false;
            } else {
                for (var i = 0; i < name.length; i++) {
                    if (!((name[i] >= 'a' && name[i] <= 'z') || (name[i] >= 'A' && name[i] <= 'Z'))) {
                        result = false;
                        break;
                    }
                }
            }
            if (!result) {
                alert('Employee name must contain only alphabets and length must of name must be greater than or equal to 2.');
            }
            return result;
        }
        function isValidEmail() {
            var result = true;
            var email = document.getElementById('email').value;
            if (email == null) {
                result = false;
            } else {
                var atSymbolFirstPosition = email.indexOf('@');
                var atSymbolLastPosition = email.lastIndexOf('@');
                var dotSymbolLastPosition = email.lastIndexOf('.');
                if (atSymbolFirstPosition < 1 || atSymbolFirstPosition != atSymbolLastPosition || dotSymbolLastPosition < atSymbolFirstPosition + 2 || dotSymbolLastPosition + 2 > email.length) {
                    result = false;
                }
            }
            if (!result) {
                alert('Invalid email. Valid email format - xxxxx@xxxxxx.xxx')
            }
            return result;
        }
        function isValidPassword() {
            var countSmallLetters = 0;
            var countCampitalLetters = 0;
            var countDigits = 0;
            var result = true;
            var password = document.getElementById('password').value;
            if (password == null || password.length < 8) {
                result = false;
            } else {
                for (var i = 0; i < password.length; i++) {
                    var letter = password[i];
                    if (letter >= 'a' && letter <= 'z') {
                        countSmallLetters++;
                    } else if (letter >= 'A' && letter <= 'Z') {
                        countCampitalLetters++;
                    } else if (letter >= '0' && letter <= '9') {
                        countDigits++;
                    } else {
                        result = false;
                    }
                }
                if (countSmallLetters == 0 || countCampitalLetters == 0 || countDigits == 0) {
                    result = false;
                }
            }
            if (!result) {
                alert('Password must contain only alphabets and numbers. Password should have minimum length of 8. Password must contain at least 1 lower case letter, 1 upper case letter and 1 digit.');
            }
            return result;
        }
        function doPasswordsMatch() {
            var password = document.getElementById('password').value;
            var confirmPassword = document.getElementById('confirmPassword').value;
            if (password != confirmPassword) {
                alert("Passwords don't match");
                return false;
            }
            return true;
        }
        function isContactNumberValid() {
            var result = true;
            var contactNumber = document.getElementById('contactNumber').value;
            if (contactNumber == null || contactNumber.length <= 8) {
                result = false;
            } else {
                for (var i = 0; i < contactNumber.length; i++) {
                    if(!(contactNumber[i] >= '0' && contactNumber[i] <= '9')) {
                        result = false;
                    }
                }
            }
            if (!result) {
                alert('Contact must have only numberic character and must have length greater than 8.');
            }
            return result;
        }
        function registerEmployee() {
            var id = Date.now();
            document.getElementById('employeeId').innerHTML = id;
            if (isValidEmployeeName() && isValidEmail() && isValidPassword() && doPasswordsMatch() && isContactNumberValid()) {
                var employeeName = document.getElementById('employeeName').value;
                document.getElementById('employeeRegistrationForm').innerHTML = '<h1>Hey ' + employeeName + ', you are registerd.<h1>';
                document.getElementById('addVehicleForm').style.visibility = 'visible';
            } 
        }
        function addVehichle() {
            var dailyPrice = [5, 10, 20];
            var monthlyPrice = [100, 200, 500];
            var yearlyPrice = [500, 1000, 3500];
            
            //document.getElementById('addVehicleForm').innerHTML = 'Vehicle Added';
            var vehicleType = document.getElementById('vehicleType').value;
            if (vehicleType == 'cycle') {
                document.getElementById('dailyPrice').innerHTML = dailyPrice[0];
                document.getElementById('monthlyPrice').innerHTML = monthlyPrice[0];
                document.getElementById('yearlyPrice').innerHTML = yearlyPrice[0];
            } else if (vehicleType == 'motorcycle') {
                document.getElementById('dailyPrice').innerHTML = dailyPrice[1];
                document.getElementById('monthlyPrice').innerHTML = monthlyPrice[1];
                document.getElementById('yearlyPrice').innerHTML = yearlyPrice[1];
            } else if (vehicleType == 'fourWheeler') {
                document.getElementById('dailyPrice').innerHTML = dailyPrice[2];
                document.getElementById('monthlyPrice').innerHTML = monthlyPrice[2];
                document.getElementById('yearlyPrice').innerHTML = yearlyPrice[2];
            }
            document.getElementById('employeeRegistrationForm').style.display = 'none';
            document.getElementById('addVehicleForm').style.display = 'none';
            document.getElementById('selectPass').style.visibility = "visible";
        }
        function setPrice(currencyType, price) {
            document.getElementById('selectPass').style.display = "none";
            if (currencyType == "INR") {
                document.getElementById('selectPass').style.display = "none";
                document.getElementById('showBill').innerHTML = "<h1> Your Cost is " + price + " Rs. , Please Pay the Amount !</h1>"
            } else if (currencyType == "USD") {
                document.getElementById('selectPass').style.display = "none";
                document.getElementById('showBill').innerHTML = "<h1> Your Cost is " + (price / 72).toFixed(2) + " $ , Please Pay the Amount !</h1>"
            } else if (currencyType == "YEN") {
                document.getElementById('selectPass').style.display = "none";
                document.getElementById('showBill').innerHTML = "<h1> Your Cost is " + (price * 1.52).toFixed(2) + " Yen , Please Pay the Amount !</h1>"
            }
        }
        function getPass() {
            var cycle = [5, 100, 500];
            var motorcycle= [10, 200, 1000];
            var fourWheeler = [20, 500, 3500];
            var finalPrice = document.getElementsByName('price');
            var currencyType = document.getElementById('country').value;
            for (i = 0; i < finalPrice.length; i++) {
                if (finalPrice[i].checked) {
                    var vehicleType = document.getElementById('vehicleType').value;
                    var selectCategory = finalPrice[i].value;
                    if (vehicleType == "cycle") {
                        setPrice(currencyType, cycle[i]);
                    } else if (vehicleType == "motorcycle") {
                        setPrice(currencyType, motorcycle[i]);
                    } else if (vehicleType == "fourWheeler") {
                        setPrice(currencyType, fourWheeler[i]);
                    }
                }
            }
        }
    </script>
</head>

<body>

    <form id="employeeRegistrationForm">
        <h1>Employee Registration Form</h1>
        <table>
            <tr>
                <td>Employee Name</td>
                <td><input id="employeeName" type="text" name="employeeName"></td>
            </tr>
            <tr>
                <td>Gender</td>
                <td>
                    <label><input type="radio" name="gender" value="male">Male</label>
                    <label><input type="radio" name="gender" value="female">Female</label>
                </td>
            </tr>
            <tr>
                <td>Email</td>
                <td><input id="email" type="email" name="email"></td>
            </tr>
            <tr>
                <td>Password</td>
                <td><input id="password" type="password" name="password"></td>
            </tr>
            <tr>
                <td>Confirm Password</td>
                <td><input id="confirmPassword" type="password" name="password"></td>
            </tr>
            <tr>
                <td>Contact Number</td>
                <td><input id="contactNumber" type="tel"></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="button" value="Register" onclick="registerEmployee()"></td>
            </tr>
        </table>
    </form>

    <form id="addVehicleForm">
        <h1>Add Vehicle</h1>
        <table>
            <tr>
                <td>Vehicle Type</td>
                <td>
                    <select id="vehicleType">
                        <option value="cycle">Cycle</option>
                        <option value="motorcycle">Motorcycle</option>
                        <option value="fourWheeler">Four Wheeler</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Vehicle Name</td>
                <td><input type="text" name="vehicleName"></td>
            </tr>
            <tr>
                <td>Vehicle Number</td>
                <td><input name="vehicleNumber"></td>
            </tr>
            <tr>
                <td>Employee Id</td>
                <td id="employeeId"></td>
            </tr>
            <tr>
                <td>Identification</td>
                <td><textarea name="identification"></textarea></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="button" value="Add Vehicle" onclick="addVehichle()"></td>
            </tr>
        </table>
    </form>

    <form id="selectPass">
        <h1>Select the Pass Type</h1>
        <label><input type="radio" value="daily" name="price">Daily - Rs.<label id="dailyPrice"></label></label><br><br>
        <label><input type="radio" value="monthly "name="price">Monthly - Rs.<label id="monthlyPrice"></label></label><br><br>
        <label><input type="radio" value="yearly "name="price">Yearly - Rs.<label id="yearlyPrice"></label></label><br><br>
        <label>Select Currency</label><select id="country">
            <option value="INR">INR</option>
            <option value="USD">USD</option>
            <option value="YEN">YEN</option>
        </select><br>
        <input type="button" value="Get Pass" onclick="getPass()"></button>
    </form>

    <div id="showBill">
    </div>
</body>

</html>